
$$(aba|bb(aa|ba^*b)^*)^*(?=(?=(aa|bb)^*aba)(ba|ab)^+)(abba|baab)^*(ba|bb)(a|bbb)^*(ab)^*$$

опираясь на определение [[lookahead]]

Let's look at the inside lookahead:
$$\underline{(?=(aa|bb)^*aba)}(ba|ab)^+$$

We can't get `aa` or `bb` at the beginning and since we have `*`, we shorten:
$$(?=\cancel{(aa|bb)^*}aba)(ba|ab)^+$$

And build the minimally suitable prefix:
$$\underline{aba}b...$$

In the end, we get:
$$abab(ba|ab)^*$$

We changed `+` to `*` because we had already applied the expression before.

Now let's look at the external lookahead:
$$\underline{(?=(a|b)abab(ba|ab)^*)}(abba|baab)^*(ba|bb)(a|bbb)^*(ab)^*$$

Similarly, we check by prefix and exclude `*` if it does not match the prefix condition:
$$(?=(a|b)abab(ba|ab)^*)\cancel{(abba|baab)^*}(\underline{ba}|bb)\cancel{(a|bbb)^*}\cancel{(ab)^*}$$

Since the length of the intersection is empty, we get as a result lookahead: $\varepsilon$ (empty word)

We substitute the result and get:
$$(aba|bb(aa|ba^*b)^*)^*\varepsilon$$

Answer:
$$(aba|bb(aa|ba^*b)^*)^*$$
