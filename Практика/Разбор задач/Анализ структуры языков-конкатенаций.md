Пусть дан язык $\mathcal{L}$ , определённый как множество конкатенаций слов, на которые наложены некоторые ограничения (возможно, связывающие их друг с другом).
Как анализировать такие языки на их принадлежность классу контекстно-свободных (регулярных)?

Выделим главные свойства языков, позволяющие быстрее строить их описания либо контрпримеры, к которым можно применять леммы о накачках.

Пусть слова языка $\mathcal{L}$ представлены как конкатенации слов $\omega_1$,..., $\omega_n$ с дополнительными ограничениями на некоторые из $\omega_i$.

Относительно частей $\omega_1$, $\dots$, $\omega_n$ полезно выяснить следующие их свойства.
1. Запрещённые подслова (forbidden factors) - подслова, которые не могут появиться ни в одном слове $\omega_i$, подчиняющемся ограничениям языка.
2. Неизбегаемые шаблоны (unavoidable patterns) - шаблоны (подслова или структуры), которые обязательно появляются в каждом слове $\omega_i$, подчиняющемся ограничениям.
3. Инварианты соотношений - предикаты $P_j(\omega_{i_1},...,\omega_{i_k})$, выполняющиеся при любом выборе слов $\omega_i$ в ограничениях языка.
Если анализ свойств составляющих языка проведён успешно, можно воспользоваться его результатами в следующем ключе.

Если известно, что $\sigma$ - неизбегаемый шаблон в $\omega_i$, тогда можно заякорить $\omega_i$ посредством ограничения слов, подходящих под шаблон $\sigma$. При выборе слова для накачки имеет смысл также зафиксировать число якорей посредством пересечения с регулярным языком.

Якори могут возникать не только в подсловах, из которых собираются слова языка, но и на стыках между подсловами.

> [!example] Неизбегаемые шаблоны на примере языка $\{\omega_0\omega_1 \omega^R_1 \omega_1 \omega_2 \mid |\omega_1|>1\}$ 
> 
> Рассмотрим задачу проанализировать этот язык в алфавите $\{a,b\}$ на контекстную свободу. Неизбегаемые шаблоны на стыках $\omega_1\omega^R_1$ и $\omega^R_1\omega_1$ здесь - вида $ts^{2k}t$, где  $s,t\in\{a,b\}$, если $\omega_1$ не в унарном алфавите (содержит как буквы $a$, так и буквы $b$),  и $s^6$, если $\omega_1$ в унарном алфавите.
> Чтобы зафиксировать соответствующие переходы, построим слово, в котором нет подслов в унарном алфавите длины больше 5 и ровно два максимальных подслова в унарном алфавите имеют чётную длину, и тем самым являются требуемыми якорями. Например, при предполагаемой длине накачки $p$ построим следующие компоненты:
> $$\begin{cases}\omega_0 = \varepsilon\\ 
> \omega_1 = ab(a^5b)^{2p+1}a\\
> \omega_2 = \varepsilon
> \end{cases}
> $$
> Рассмотрим возможные альтернативные разбиения их конкатенации $\omega = ab(a^5b)^{2p}a^5\underbrace{b a a b}_{\text{переход }\omega_1\omega^R_1}(a^5b)^{2p} a^5 \underbrace{ba a b}_{\text{переход }\omega^R_1\omega_1}(a^5 b)^{2p} a^5 ba$. Здесь $\omega^R_1$ оказывается заякорено между двумя вхождениями $baab$, значит, $|\omega^R_1|=12p+9$, а поскольку $|\omega_1|=|\omega^R_1|$, то никаких других разбиений $\omega$ на подслова $\omega_0$, $\omega_1$, $\omega_2$ не существует.
> После построения контрпримера и фиксации якорей пересечением с регулярным выражением $ab(a^5ba^5b)^*a^5baab(a^5ba^5b)^*a^5baab(a^5ba^5b)^*a^5ba$ опровержение контекстной свободы рассматриваемого языка не представляет никакой сложности.

Если известно, что $\upsilon$ - запрещённое подслово в $\omega_i$, но оно не является запрещённым в $\omega_{i+1}$ и $\omega_{i-1}$, тогда можно ограничить возможности выделения (дрейфа) фрагмента $\omega_i$ , окружив его подсловами $\upsilon$.

Дополнительно полезно использовать инварианты (в частности, инварианты соотношений длин или соотношений на вхождения подслов), для того чтобы зафиксировать относительные размеры слов $\omega_i$. Особенно удобны инварианты длин при переборе возможных накачек: если подслова в слове-контрпримере заякорены, зачастую этот перебор становится ненужным, потому что изменение размеров подслов немедленно нарушает инвариант.

