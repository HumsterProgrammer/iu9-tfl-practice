
>[!note] Определение 
> Грамматика G находится в нормальной форме Хомского $\Leftrightarrow$ правила G имеют вид
> $$\begin{matrix}
> A_i \to A_j A_k \quad (A_i, A_j, A_k \in N)\\
> \text{или} \\
> A_i \to c \quad(c \in \Sigma)
> \end{matrix}$$

Что нам мешает получить НФХ?
1) $A \to \varepsilon$
	Нужно понять какие нетерминалы могут выродиться в пустое слово. Стоит учитывать, что нетерминалы могут вырождаться и за несколько шагов в пустое слово. Например, для грамматики
	$$\begin{matrix}A_1 \to A_2A_3\\ A_2 \to A_3A_3 \\A_3\to \varepsilon\end{matrix}$$
	Все нетерминалы вырождаются в пустое слово. Здесь алгоритм крайне похож на нахождение и удаление эпсилон-замыканий в автоматах. 
	Посчитаем $\varepsilon$-замыкания для нетерминала $A_i$ и если $A_i$ порождает пустое слово. Для всех правил вида $A_j \to \varphi_1 A_i \varphi_2$ добавляем 2 варианта раскрытия: $A_j \to \varphi_1A_i'\varphi_2 \mid \varphi_1 \varphi_2$, при этом в $A_i'$ уже нет раскрытия в пустое слово. Произведя это действие рекурсивно, а может потребоваться много действий для этого, мы получим грамматику, в которой, хотя и могут быть эпсилон-правила, но не будет обнуляемых нетерминалов в правых частях. Очевидно, что тогда в грамматике останется максимум одно эпсилон правило $S \to S' \mid \varepsilon$, а другие мы уберем в процессе преобразований.
	
2) Смешанные правила ($A_i \to a A_j$) убираем добавляя новые нетерминалы в грамматику. 
3) Длинные правила разбиваем на последовательность коротких правил
4) Цепные правила $A_i \to A_j$ значат, что с точки зрения НКА есть переход по пустому слову из $A_i$ в $A_j$. Мы заменяем все вхождения $A_i$ на $A_j$.

>[!example] Пример, когда такие преобразований экспоненциально увеличивают размер грамматики
>Рассмотрим грамматику $S \to SaSbS \mid \varepsilon$.
>По алгоритму вводим дополнительное правило $S_0 \to \varepsilon \mid S'$.
>Для $S'$ мы добавляем новые правила раскрытия, в различных комбинациях с эпсилон-замыканиями:
>$$\begin{matrix}
>S_0 \to \varepsilon \mid S' \\
>S' \to S'aS'bS' \mid aS'bS' \mid S'abS' \mid S'aS'b \mid S'ab \mid aS'b \mid abS' \mid ab
>\end{matrix}$$

