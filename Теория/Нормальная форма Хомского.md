
>[!note] Определение 
> Грамматика G находится в нормальной форме Хомского $\Leftrightarrow$ правила G имеют вид
> $$\begin{matrix}
> A_i \to A_j A_k \quad (A_i, A_j, A_k \in N)\\
> \text{или} \\
> A_i \to c \quad(c \in \Sigma)
> \end{matrix}$$

Что нам мешает получить НФХ?
1) $A \to \varepsilon$
	Нужно понять какие нетерминалы могут выродиться в пустое слово. Стоит учитывать, что нетерминалы могут вырождаться и за несколько шагов в пустое слово. Например, для грамматики
	$$\begin{matrix}A_1 \to A_2A_3\\ A_2 \to A_3A_3 \\A_3\to \varepsilon\end{matrix}$$
	Все нетерминалы вырождаются в пустое слово. Здесь алгоритм крайне похож на нахождение и удаление эпсилон-замыканий в автоматах. 
	Посчитаем $\varepsilon$-замыкания для нетерминала $A_i$ и если $A_i$ порождает пустое слово. Для всех правил вида $A_j \to \varphi_1 A_i \varphi_2$ добавляем 2 варианта раскрытия: $A_j \to \varphi_1A_i'\varphi_2 \mid \varphi_1 \varphi_2$, при этом в $A_i'$ уже нет раскрытия в пустое слово. Произведя это действие рекурсивно, а может потребоваться много действий для этого, мы получим грамматику, в которой, хотя и могут быть эпсилон-правила, но не будет обнуляемых нетерминалов в правых частях. Очевидно, что тогда в грамматике останется максимум одно эпсилон правило $S \to S' \mid \varepsilon$, а другие мы уберем в процессе преобразований.
	
2) Смешанные правила ($A_i \to a A_j$) убираем добавляя новые нетерминалы в грамматику. 
3) Длинные правила разбиваем на последовательность коротких правил
4) Цепные правила $A_i \to A_j$ значат, что с точки зрения НКА есть переход по пустому слову из $A_i$ в $A_j$. Мы заменяем все вхождения $A_i$ на $A_j$.

>[!example] Пример, когда такие преобразований экспоненциально увеличивают размер грамматики
>Рассмотрим грамматику $S \to SaSbS \mid \varepsilon$.
>По алгоритму вводим дополнительное правило $S_0 \to \varepsilon \mid S'$.
>Для $S'$ мы добавляем новые правила раскрытия, в различных комбинациях с эпсилон-замыканиями:
>$$\begin{matrix}
>S_0 \to \varepsilon \mid S' \\
>S' \to S'aS'bS' \mid aS'bS' \mid S'abS' \mid S'aS'b \mid S'ab \mid aS'b \mid abS' \mid ab
>\end{matrix}$$
>Эта грамматика уже не содержит эпсилон правил, но она содержит длинные правила, которые мы также можем преобразовать, чтобы получить нормальную форму Хомского:
>$$\begin{matrix}
>A \to a\\
>B \to b\\
>T_1 \to aS'bS'\\
>T_2 \to S'bS'\\
>T_3 \to abS'\\
>T_4 \to aS'b\\
>T_5 \to ab \\
>T_6 \to S'b\\
>T_7 \to bS'\\
>S' \to S'T_1 \mid AT_2 \mid S'T_3 \mid S'T_4 \mid S'T_5 \mid AT_6 \mid AT_7
>\end{matrix}$$
>И повторяем алгоритм еще раз для всех новых нетерминалов
>$$\begin{matrix}
>S_0 \to S' \mid \varepsilon\\
>S' \to S'T_1 \mid AT_2 \mid S'T_3 \mid S'T_4 \mid S'T_5 \mid AT_6 \mid AT_7 \\
>T_1 \to AT_2 \\
>T_2 \to S'T_7 \\
>T_3 \to AT_7 \\
>T_4 \to AT_6 \\
>T_5 \to AB \\
>T_6 \to S'B \\
>T_7 \to BS' \\
>A \to a \\
>B \to b
>\end{matrix}$$
>Полученная грамматика находится в нормальной форме Хомского

